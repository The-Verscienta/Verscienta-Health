import { Meta, Canvas, Story, Controls, Primary } from '@storybook/blocks'
import * as ButtonStories from './button.stories'
import { Button } from './button'

<Meta of={ButtonStories} />

# Button

A versatile button component built on Radix UI with multiple variants and sizes.

<Primary />

## Overview

The Button component is a fundamental interactive element used throughout the Verscienta Health platform. It's built on top of Radix UI's Slot primitive and provides consistent styling, accessibility, and behavior.

## Usage

```tsx
import { Button } from '@/components/ui/button'

export default function Example() {
  return (
    <Button variant="default" size="default">
      Click me
    </Button>
  )
}
```

## Variants

### Default

The primary action button with sage green background.

<Canvas of={ButtonStories.Default} />

### Secondary

For secondary actions with a muted background.

<Canvas of={ButtonStories.Secondary} />

### Outline

A subtle button with border and transparent background.

<Canvas of={ButtonStories.Outline} />

### Ghost

Minimal styling for low-emphasis actions.

<Canvas of={ButtonStories.Ghost} />

### Destructive

For dangerous or destructive actions like delete.

<Canvas of={ButtonStories.Destructive} />

### Link

Styled as a link without button appearance.

<Canvas of={ButtonStories.Link} />

## Sizes

Buttons come in four sizes to fit different contexts:

### Small

<Canvas of={ButtonStories.Small} />

### Default (Medium)

<Canvas of={ButtonStories.Default} />

### Large

<Canvas of={ButtonStories.Large} />

### Icon

Square button optimized for icons only.

<Canvas of={ButtonStories.Icon} />

## With Icons

Buttons can include icons for enhanced visual communication:

<Canvas of={ButtonStories.WithIcon} />

## States

### Loading

Show loading state during async operations:

```tsx
<Button disabled>
  <Loader2 className="mr-2 h-4 w-4 animate-spin" />
  Please wait
</Button>
```

### Disabled

<Canvas of={ButtonStories.Disabled} />

## Props

<Controls />

## Accessibility

- **Keyboard Navigation**: Fully accessible via keyboard (Enter/Space to activate)
- **Focus Indicators**: Clear focus rings for keyboard navigation
- **ARIA**: Proper button semantics and states
- **Screen Readers**: Announces button text and state

### Best Practices

- Use descriptive button text that clearly indicates the action
- For icon-only buttons, provide `aria-label`:
  ```tsx
  <Button variant="ghost" size="icon" aria-label="Close dialog">
    <X className="h-4 w-4" />
  </Button>
  ```
- Use the correct variant for the action's importance
- Show loading state for async actions
- Disable buttons during processing to prevent double-submission

## Design Guidelines

### When to Use

- **Default**: Primary actions (Submit, Save, Continue)
- **Secondary**: Secondary actions (Cancel, Back)
- **Outline**: Alternative actions or filters
- **Ghost**: Tertiary actions, toolbar buttons
- **Destructive**: Delete, remove, or destructive actions
- **Link**: Navigation that looks like a link

### Do's

✅ Use consistent button sizes within a section
✅ Provide clear, action-oriented labels
✅ Show loading state for async operations
✅ Use icons to enhance clarity (not replace text)
✅ Maintain touch-friendly targets (44x44px minimum)

### Don'ts

❌ Don't use multiple primary buttons in the same context
❌ Don't use vague labels like "Click here"
❌ Don't rely on color alone to convey meaning
❌ Don't make icon-only buttons without labels/tooltips
❌ Don't use buttons for navigation (use links instead)

## Examples

### Form Actions

```tsx
<div className="flex justify-end gap-2">
  <Button variant="outline">Cancel</Button>
  <Button type="submit">Save Changes</Button>
</div>
```

### Loading State

```tsx
const [isLoading, setIsLoading] = useState(false)

<Button
  onClick={async () => {
    setIsLoading(true)
    await saveData()
    setIsLoading(false)
  }}
  disabled={isLoading}
>
  {isLoading && <Loader2 className="mr-2 h-4 w-4 animate-spin" />}
  {isLoading ? 'Saving...' : 'Save'}
</Button>
```

### As Link (Next.js)

```tsx
import Link from 'next/link'

;<Button asChild>
  <Link href="/herbs">Browse Herbs</Link>
</Button>
```

### Confirmation Button

```tsx
<Button
  variant="destructive"
  onClick={() => {
    if (confirm('Are you sure you want to delete this?')) {
      handleDelete()
    }
  }}
>
  Delete Herb
</Button>
```

## Related Components

- **Link**: For navigation actions
- **IconButton**: Specialized icon-only button
- **DropdownMenu**: For dropdown menus with button triggers

## Technical Details

### Component Structure

The Button component uses:

- **Radix UI Slot**: For composition and polymorphism
- **class-variance-authority (cva)**: For variant management
- **Tailwind CSS**: For styling
- **React.forwardRef**: For ref forwarding

### Customization

You can customize the button by:

1. **Extending variants** in `button.tsx`:

```tsx
const buttonVariants = cva('...', {
  variants: {
    variant: {
      custom: 'bg-custom-color hover:bg-custom-color/90',
    },
  },
})
```

2. **Using className prop**:

```tsx
<Button className="w-full md:w-auto">Responsive Width</Button>
```

3. **Composing with asChild**:

```tsx
<Button asChild variant="outline">
  <a href="https://example.com">External Link</a>
</Button>
```
